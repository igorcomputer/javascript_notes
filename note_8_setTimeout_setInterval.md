## Функции setTimeout и setInterval


- __setTimeout__ позволяет вызвать функцию один раз через определённый интервал времени.
- __setInterval__ позволяет вызывать функцию регулярно, повторяя вызов через определённый интервал времени.


### setTimeout - Таймер

Время таймера описывается в милисекундах (1000 = 1Сек) 

```javascript
//////////////////////////////////////
// Пример с функцией в виде строки 
// (не рекомендуется, устаревший вариант) 
//////////////////////////////////////

setTimeout("alert('Привет')", 1000);

//////////////////////////////////////
// Замена первого способа, так предпочтительней
//////////////////////////////////////

// С использованием обычной функции 

setTimeout(() => alert('Привет'), 1000);

// С использованием обычной функции

setTimeout(function(){
  alert('Привет');
}, 1000); 

//////////////////////////////////////
// Пример использования c отдельной функцией 
//////////////////////////////////////

function sayHi() { 
  alert('Привет'); 
}

// Тут ссылка на функцию а не вызов
setTimeout(sayHi, 1000); 

//////////////////////////////////////
// Пример с аргументами 
//////////////////////////////////////

function sayHi(phrase, who) {
  alert( phrase + ', ' + who );
}

setTimeout(sayHi, 1000, "Привет", "Джон"); // Привет, Джон

```

### Отмена через clearTimeout

setTimeout возвращает идентификатор, который можно использовать для отмены функции

Идентификатор таймера может быть числом или чем то другим в зависимости от среды выполнения (браузер, node.js или что то другое) 

```javascript

// Установили таймер 
let timerId = setTimeout(() => alert("Это не выполнится!"), 1000);
console.log(timerId); // Посмотрим, что внутри таймера (

// Производим отмену
clearTimeout(timerId);

console.log(timerId); // тот же идентификатор (не принимает значение null после отмены) 
```

### setInterval - повторитель действий через заданный интервал времени

__clearInterval__ - метод для остановки действий 

Синтаксис такой же как и для __setTimeout__

```javascript
// повторить с интервалом 2 секунды
let timerId = setInterval(() => alert('tick'), 2000);

// остановить вывод через 5 секунд
setTimeout(() => { clearInterval(timerId); alert('stop'); }, 5000); 
```

__После выполнения действия, отсчет до следующего запуска не останавливается, а продолжает идти__


### Рекурсивный setTimeout (Nested setTimeout)

__Рекурсивный setTimeout – более гибкий метод, чем setInterval.__
С его помощью последующий вызов может быть задан по-разному в зависимости от результатов предыдущего.

__Рекурсивный setTimeout__ - учитывает длительность повторяющихся действий 
Ждет когда действие закончится, и только потом начинает отсчет времени. 

__setInterval__ - не учитывает длительность повторяющихся действий. 


Сравнение вызовов: 

```javascript
//////////////////////////////////////////
// Пример setItnerval
//////////////////////////////////////////

let i = 1;
setInterval(function() {
  func(i++);
}, 1000);

///////////////////////////////////////////
// Пример простого рекурсивного setTimeout 
///////////////////////////////////////////

let i = 1;
setTimeout(function run() {
  console.log("i: ",i++); 
  setTimeout(run, 1000);
}, 1000);
```

__Пример гибкости рекурсивного setTimeout__

Используя рекурсивный setTimeout последующий вызов может быть задан по-разному в зависимости от результатов предыдущего.

Например, необходимо написать сервис, который отправляет запрос для получения данных на сервер каждые 5 секунд, но если сервер перегружен, то необходимо увеличить интервал запросов до 10, 20, 40 секунд… 

```javascript
let delay = 5000;

let timerId = setTimeout(function request() {
  ...отправить запрос...

  if (ошибка запроса из-за перегрузки сервера) {
    // увеличить интервал для следующего запроса
    delay *= 2;
  }

  timerId = setTimeout(request, delay);

}, delay);
```

__Ссылки:__

- https://learn.javascript.ru/settimeout-setinterval 
- https://www.sitepoint.com/jquery-settimeout-function-examples/ 


